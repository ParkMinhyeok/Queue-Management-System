# Efficient Real-Time Data Processing for Multi-Robot Systems Using Priority-Aware Queue Scheduling and ETA Estimation

## 1. 연구 배경
최근 로봇 기술과 인공지능의 발전으로 다수의 로봇이 협업하여 복잡한 작업을 수행하는 시스템에 대한 연구가 활발히 진행되고 있다. 특히, 자율 주행 로봇이나 협업 로봇 시스템에서는 실시간 데이터 처리와 효율적인 자원 관리가 핵심적인 과제로 대두되고 있다. 이러한 시스템에서 로봇들은 제한된 계산 자원을 가지고 있기 때문에, 온디바이스에서의 실시간 처리는 종종 성능의 병목 현상을 일으키며, 이는 전체 시스템의 효율성을 저하시키는 주요 원인으로 작용한다. 또한, 다수의 로봇이 동시에 데이터를 처리하고 교환하는 환경에서는 우선순위 기반의 작업 스케줄링과 예상 처리 시간(ETA) 계산이 필수적이다. 이러한 문제를 해결하기 위해 중앙 서버를 활용한 분산 처리 시스템이 주목받고 있으나, 실시간으로 발생하는 데이터의 양과 우선순위를 고려한 효율적인 큐 관리 및 처리 방식에 대한 연구는 여전히 부족한 상황이다.

## 2. 연구 목적
본 연구의 목적은 다수의 로봇이 협업하여 주행하는 환경에서 실시간으로 발생하는 데이터를 효율적으로 처리하기 위한 시스템인 우선순위 기반 큐 관리 시스템(Priority-Based Queue Management System)을 제안한다. PQMS(Priority-Based Queue Management System)는 중앙 서버와 다수의 클라이언트 로봇으로 구성된 시스템을 설계하고, 서버는 클라이언트로부터 수신된 데이터를 실시간으로 처리하며 우선순위와 예상 처리 시간을 계산하여 작업을 스케줄링한다. 특히, 라인 트레이서 로봇과 이를 추종하는 로봇은 리소스가 적은 라즈베리파이를 활용하여 실험을 진행하였으며, 라인 트레이서 로봇은 가장 높은 우선순위를 가지고, 뒤따르는 로봇들은 점차 낮은 우선순위를 갖도록 설계한다. 또한, 서버의 처리 부하가 높을 경우 예상 처리 시간을 계산하여 클라이언트 로봇이 부분적으로 데이터를 처리하도록 분산 처리 방식을 도입함으로써 시스템의 전반적인 효율성을 높이는 것을 목표로 한다.

## 3. 연구 중요성
본 연구는 다수의 로봇이 협업하는 환경에서 실시간 데이터 처리의 효율성을 높이는 PQMS 기법을 제시한다는 점에서 중요한 의미를 가진다. PQMS 기법은 우선순위 기반의 큐 관리와 예상 처리 시간 계산을 통해 서버의 부하를 분산시키고, 클라이언트 로봇의 로컬 처리 능력을 최대한 활용함으로써 전체 시스템의 성능을 향상시킨다. 또한, 진행 중인 작업을 중단하고 중간 결과를 전송하는 방식을 통해 우선순위가 높은 작업을 즉시 처리할 수 있도록 함으로써 실시간성을 보장한다. 이러한 접근 방식은 자율 주행 로봇, 스마트 팩토리, 드론 군집 제어 등 다양한 분야에서 적용 가능하며, 다수의 장치가 협업하는 시스템의 설계와 구현에 있어 새로운 지침을 제공할 수 있다. 본 연구를 통해 다수의 로봇이 협업하는 환경에서의 실시간 데이터 처리 문제를 해결하고, 향후 관련 분야의 연구와 기술 발전에 기여할 수 있을 것으로 기대된다.

## 4. 시스템 모델
### 4.1. 시스템 개요
본 연구에서 제안하는 PQMS 기법은 다수의 로봇이 협업하여 주행하는 환경에서 실시간 데이터 처리를 효율적으로 관리하기 위해 설계되었다. 시스템은 중앙 서버와 다수의 클라이언트 로봇(라즈베리파이)으로 구성되며, 서버는 클라이언트로부터 수신된 데이터를 우선순위 기반 큐 관리 시스템을 통해 처리한다. 또한, 예상 처리 시간(ETA)을 계산하여 클라이언트 로봇의 로컬 처리와 서버의 분산 처리를 최적화한다.
### 4.2. 시스템 아키텍처
#### 4.2.1 클라이언트 로봇 :
* 라인 트레이서 로봇 : 주어진 트랙을 따라 주행하며, 서버에서 처리되는 우선순위 중 가장 높은 우선순위를 가진다.
* 추종 로봇 : YOLOv3를 기반으로 특정 로봇을 감지할 수 있도록 학습됨. 해당 모델을 사용하여 앞서 주행하는 로봇을 주적하며, 우선순위는 위치에 따라 가장 앞선 차량부터 높은 우선순위를 가진다.
#### 4.2.2 중앙 서버 :
* 클라이언트로부터 수신된 데이터를 실시간으로 처리한다.
* 예상 처리 시간(ETA)을 계산하여 작업을 스케줄링한다.
* 우선순위 기반 큐 관리 시스템을 운영한다.
#### 4.2.3 통신 모듈 :
* WiFi 프로토콜을 통해 클라이언트와 서버 간의 실시간 데이터를 교환한다.
#### 4.2.4 큐 관리 시스템 :
* 우선순위와 예상 처리 시간을 계산하여 작업을 스케줄링한다.
### 4.3. 우선순위 기반 큐 관리 시스템 (Priority-Based Queue Management System)
큐 관리 시스템은 클라이언트로부터 수신된 작업 요청을 우선순위에 따라 처리한다. 우선순위는 로봇의 위치와 역할에 따라 결정되며, 선두인 라인 트레이서 로봇이 가장 높은 우선순위를 갖는다. 각 작업의 예상 처리 시간(ETA)은 서버의 현재 부하와 작업의 복잡도를 고려하여 계산된다. 우선순위가 높은 작업이 큐에 추가될 경우, 진행 중인 낮은 우선순위 작업은 중단되고 중간 결과를 클라이언트로 전송하여 로컬에서 나머지 처리를 완료하도록 한다. 그로 인해 서버에서의 처리를 기다리고 있던 클라이언트들 또한 로컬 처리로 변경될 수 있다.
### 4.4 데이터 흐름 및 통신 프로토콜
기본적으로 모든 클라이언트는 서버에서 처리되는 것을 가장 우선순위로 가지고 전송한다. 서버는 이를 수신하여 큐에 추가하고, 우선순위에 따라 처리 결과를 클라이언트로 전송한다. 이때 통신은 WiFi 프로토콜을 통해 이루어지며, 데이터 패킷은 클라이언트 ID, 처리 데이터, 처리 상태가 전송된다. 

## 5. 학습 데이터 셋 수집 및 학습
본 연구에서는 AlphaBot의 주행 성능 향상을 위해 반복적인 데이터셋 수집 및 모델 학습 과정을 수행하였다. 이 과정은 총 6단계로 진행되었으며, 각 단계별 데이터 수집 방식과 결과는 다음과 같다.
### 5.1. 데이터셋 수집 및 학습
#### 5.1.1. 최초 학습
* 촬영 방식: AlphaBot이 정지된 상태에서 촬영
* 데이터셋 규모: 50개 이미지
* 결과: 직진 코스에서 안정적 주행 불가능
#### 5.1.2. 직진 주행 데이터 보강
* 촬영 방식: 직진 주행 중 인식 실패 이미지 수집
* 데이터셋 규모: 총 150개 (기존 50개 + 신규 100개)
* 결과: 직진 주행 안정성 향상, 50cm 거리 간헐적 완주 가능
#### 5.1.3. 코너 주행 데이터 추가
* 촬영 방식: 직진 주행 및 코너 부분 인식 실패 이미지 수집
* 데이터셋 규모: 총 200개 (기존 150개 + 신규 50개)
* 결과: 직진 코스 안정적 주행 가능, 코너 주행 불가능
#### 5.1.4. 코너 주행 데이터 보강
* 촬영 방식: 코너 부분 인식 실패 이미지 중점 수집
* 데이터셋 규모: 총 292개 (기존 200개 + 신규 92개)
* 결과: 직진 및 코너 주행 안정화, 고속 코너 주행 시 어려움 발생
#### 5.1.5. 대규모 코너 데이터 추가
* 촬영 방식: 코너 부분 인식 실패 이미지 대량 수집
* 데이터셋 규모: 총 631개 (기존 292개 + 신규 339개)
* 결과: 오히려 이전 단계보다 인식률 저하
#### 5.1.6. 선별적 데이터 추가
* 촬영 방식: 코너 부분 인식 실패 이미지 선별 수집
* 데이터셋 규모: 총 353개 (4단계 292개 + 신규 61개)
* 결과: 5단계와 마찬가지로 인식률 저하 관찰
### 5.2. 학습 방법
본 연구에서는 YOLOv3 모델을 사용하여 객체 감지 시스템 학습하였고, 세부 내용은 아래와 같다.
#### 5.2.1 환경 설정
Darknet 프레임워크를 사용하여 YOLOv3 모델을 구성, GPU 가속과 CUDNN을 활성화하여 학습 속도를 향상
#### 5.2.2 데이터 준비
수집된 이미지를 훈련 세트(85%)와 테스트 세트(15%)로 분할
#### 5.2.3 모델 구성
모델 구성: YOLOv3 구성 파일을 수정하여 우리의 객체 클래스에 맞게 조정. 클래스 수를 1로 설정하고, 필터 수를 18로 변경
#### 5.2.4 하이퍼파라미터 설정
배치 크기를 64로, 세분화를 16으로 설정. 최대 배치 수를 6000으로 설정하여 학습 시간을 조절
#### 5.2.5 사전 학습된 가중치
darknet53.conv.74 가중치 파일을 사용하여 전이 학습을 수행
#### 5.2.6 학습 실행
Darknet의 detector train 명령을 사용하여 모델 학습을 실행
### 5.3. 분석 및 고찰
데이터셋 구축 과정에서 관찰된 주요 특징은 다음과 같다:
1. 초기 정지 상태 이미지만으로는 실제 주행 상황 대응에 한계가 있었다.
2. 직진 및 코너 주행 데이터를 균형있게 추가함으로써 전반적인 주행 성능이 향상되었다.
3. 데이터셋의 양적 증가가 반드시 성능 향상으로 이어지지 않았으며, 오히려 과적합(overfitting) 문제가 발생할 수 있음을 확인하였다.
이러한 결과를 바탕으로, 본 연구에서는 4단계에서 구축된 292개의 데이터셋을 최종적으로 사용하여 YOLOv3 모델을 학습시켰다. 이 학습된 모델은 추종 로봇들의 객체 감지 시스템에 적용되어 앞서 주행하는 로봇을 효과적으로 추적할 수 있게 하였다.

## 6. 실험 설계
### 6.1. 라인 트레이서 로봇 :
라즈베리파이를 기반으로 하는 AlphaBot2-pi를 활용하여 주행 로봇을 구현하였다. 선두 주행 로봇으로 주어진 트랙을 따라 주행한다.
### 6.2. 추종 로봇 :
라즈베리파이를 기반으로 하는 AlphaBot2-pi를 활용하여 주행 로봇을 구현하였다. 총 4대의 추종 로봇이 존재하고, 자신의 앞선 로봇을 추종하게 된다. 가장 선두의 추종 로봇은 라인 트레이서 로봇을 추종한다. 추종하는 4대의 주행 로봇은 모두 동일하게 학습된 객체 감지 모델이 적동된다.
### 6.3. 중앙 서버 :
5대의 클라이언트를 실시간으로 처리하고, 상황에따라 유동적으로 대처한다. (스펙 설명)
### 6.4. 주행 맵(경로) :
2mx2m 사이즈의 맵을 주행한다. (예시), (사진첨부)
### 6.5. 통신 프로토콜 :
서버와 모든 클라이언트는 WiFi 통신을 사용한다.
(평균 통신 속도)
### 6.6. PQMS 기법 :
위 논문에서 제시하는 기법으로 Queue 상에서 우선순위와 ETA를 계산하여 안정적인 주행을 위한 최적의 처리를 진행하게 된다.
### 6.7. 다른 논문에서 제시하는 Queue 처리 기법
### 6.8. 풀 원격처리 기법
### 6.9. 로컬처리 기법

## 7. 실험 목표 : 
여러 기법들을 동일한 주행 맵을 주행하고 완주 여부와 경과 시간을 비교한다.
(되도록 풀 로컬처리에서도 완주가 가능하도록 알고리즘 계발)

## 결과 및 분석

## 연구 요약

## 주요 결과

## 연구의 기여

## 향후 연구 방향

# 참조
